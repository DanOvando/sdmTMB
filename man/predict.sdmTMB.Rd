% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/predict.R
\name{predict.sdmTMB}
\alias{predict.sdmTMB}
\title{Predict from an sdmTMB model}
\usage{
\method{predict}{sdmTMB}(object, newdata = NULL, xy_cols = c("X", "Y"),
  ...)
}
\arguments{
\item{object}{An object from \code{\link[=sdbTMB]{sdbTMB()}}.}

\item{newdata}{An optional new data frame. This should be a single set of
spatial locations. These locations will be expanded to cover all the years
in the original data set. Eventually \code{newdata} will be more flexible.}

\item{xy_cols}{A character vector of length 2 that gives the column names of
the x and y coordinates in \code{newdata}.}

\item{...}{Not implemented.}
}
\description{
Can predict on the original data locations or onto new data.
}
\examples{
pcod_spde <- make_spde(pcod$X, pcod$Y, n_knots = 50)
m <- sdmTMB(
 pcod, density ~ 0 + as.factor(year) + depth_scaled + depth_scaled2,
 time = "year", spde = pcod_spde, family = tweedie(link = "log"),
 silent = TRUE
)
predictions <- predict(m)
cols <- c("year", "X", "Y", "prediction", "prediction_fe",
  "prediction_re", "s_i")
head(predictions[,cols])

predictions <- predict(m, newdata = qcs_grid)
library(ggplot2)
plot_map <- function(dat, column = "prediction") {
  ggplot(dat, aes_string("X", "Y", fill = column)) +
    geom_raster() +
    facet_wrap(~year) +
    coord_fixed()
}
plot_map(predictions, "exp(prediction)") +
  scale_fill_viridis_c(trans = "sqrt") +
  ggtitle("Prediction (fixed effects + random effects)")
plot_map(predictions, "exp(prediction_fe)") +
  ggtitle("Prediction (fixed effects only)") +
  scale_fill_viridis_c(trans = "sqrt")
plot_map(predictions, "prediction_re") +
  ggtitle("Random effects only") +
  scale_fill_gradient2()
}

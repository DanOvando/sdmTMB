% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fit.R
\name{sdmTMB}
\alias{sdmTMB}
\title{sdmTMB}
\usage{
sdmTMB(data, formula, time, spde, family = gaussian(link = "log"),
  silent = FALSE, multiphase = TRUE)
}
\arguments{
\item{data}{A data frame.}

\item{formula}{Model formula. For index standardization you will want to
include \code{0 + as.factor(your_time_column)}.}

\item{time}{The time column (as character).}

\item{spde}{An object from \code{\link[=make_spde]{make_spde()}}.}

\item{family}{The family and link.}

\item{silent}{Silent or optimization details?}

\item{multiphase}{Estimate the fixed and random effects in phases for speed?}
}
\description{
sdmTMB
}
\examples{
d <- subset(pcod, year >= 2011) # subset for example speed
pcod_spde <- make_spde(d$X, d$Y, n_knots = 100) # only 100 knots for example speed

# Tweedie:
m <- sdmTMB(
  d, density ~ 0 + as.factor(year) + depth_scaled + depth_scaled2,
  time = "year", spde = pcod_spde, family = tweedie(link = "log"))

# Contents of the output object:
names(m)
m$model
TMB::sdreport(m$tmb_obj)
m$tmb_obj$report()

# Binomial:
pcod_binom <- d
pcod_binom$present <- ifelse(pcod_binom$density > 0, 1L, 0L)
m_bin <- sdmTMB(pcod_binom,
  present ~ 0 + as.factor(year) + depth_scaled + depth_scaled2,
  time = "year", spde = pcod_spde, family = binomial(link = "logit"),
  silent = TRUE)

# Gaussian:
pcod_gaus <- subset(d, density > 0)
pcod_spde_gaus <- make_spde(pcod_gaus$X, pcod_gaus$Y, n_knots = 100)
m_pos <- sdmTMB(pcod_gaus,
  log(density) ~ 0 + as.factor(year) + depth_scaled + depth_scaled2,
  time = "year", spde = pcod_spde_gaus, silent = TRUE)
}
